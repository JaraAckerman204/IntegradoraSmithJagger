// Variables globales para almacenar los productos en el carrito
let allProducts = [];

// Función para mostrar los productos en el carrito y actualizar la página
const showHTML = () => {
  // Mostrar el mensaje de "El carrito está vacío" y ocultar el resumen del carrito si no hay productos en el carrito
  if (!allProducts.length) {
    document.querySelector('.cart-empty').classList.remove('hidden');
    document.querySelector('.row-product').classList.add('hidden');
    document.querySelector('.cart-total').classList.add('hidden');
  } else {
    // Ocultar el mensaje de "El carrito está vacío" y mostrar el resumen del carrito si hay productos en el carrito
    document.querySelector('.cart-empty').classList.add('hidden');
    document.querySelector('.row-product').classList.remove('hidden');
    document.querySelector('.cart-total').classList.remove('hidden');
  }

  // Limpiar los productos existentes en el carrito para actualizar la lista
  document.querySelector('.row-product').innerHTML = '';

  let total = 0;
  let totalOfProducts = 0;

  // Iterar sobre todos los productos en el carrito para mostrarlos en la página web
  allProducts.forEach(product => {
    const containerProduct = document.createElement('div');
    containerProduct.classList.add('cart-product');

    // Crear el HTML para mostrar la información del producto en el carrito
    containerProduct.innerHTML = `
      <div class="info-cart-product">
          <span class="cantidad-producto-carrito">${product.quantity}</span>
          <p class="titulo-producto-carrito">${product.title}</p>
          <span class="precio-producto-carrito">${product.price}</span>
      </div>
      <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="icon-close"
      >
          <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M6 18L18 6M6 6l12 12"
          />
      </svg>
    `;

    // Agregar el producto al carrito en la página web
    document.querySelector('.row-product').appendChild(containerProduct);

    total += product.quantity * product.price;
    totalOfProducts += product.quantity;
  });

  // Actualizar el valor total a pagar y la cantidad total de productos en el carrito
  document.querySelector('.total-pagar').innerText = `$${total}`;
  document.querySelector('#contador-productos').innerText = totalOfProducts;

  // Actualizar el enlace del botón de WhatsApp
  actualizarEnlaceWhatsApp();
};

// Agregar un evento al contenedor de productos para detectar clics en botones "Comprar"
document.addEventListener('click', e => {
  if (e.target.classList.contains('btn-add-cart')) {
    // Obtener la información del producto seleccionado
    const product = e.target.closest('.card.juego');
    const infoProduct = {
      quantity: 1,
      title: product.querySelector('.nom').textContent,
      price: parseFloat(product.querySelector('.price').textContent.slice(1)),
    };

    // Comprobar si el producto ya existe en el carrito
    const exists = allProducts.some(product => product.title === infoProduct.title);

    // Si el producto ya existe, actualizar la cantidad; de lo contrario, agregarlo al arreglo
    if (exists) {
      const products = allProducts.map(product => {
        if (product.title === infoProduct.title) {
          product.quantity++;
          return product;
        } else {
          return product;
        }
      });
      allProducts = [...products];
    } else {
      allProducts = [...allProducts, infoProduct];
    }

    // Mostrar los productos actualizados en el carrito
    showHTML();
  }
});

// Agregar un evento al contenedor de productos del carrito para detectar clics en los botones de eliminar productos
document.querySelector('.row-product').addEventListener('click', e => {
  if (e.target.classList.contains('icon-close')) {
    // Obtener el producto que se desea eliminar del carrito
    const product = e.target.closest('.cart-product');
    const title = product.querySelector('.titulo-producto-carrito').textContent;

    // Filtrar el producto del arreglo de productos del carrito
    allProducts = allProducts.filter(product => product.title !== title);

    // Mostrar los productos actualizados en el carrito
    showHTML();
  }
});


hola puedes crearme un carrito que muestre los que juegos que viene el js